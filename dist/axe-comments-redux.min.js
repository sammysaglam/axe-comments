var AxeCommentsRedux=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(2),m=function(e){return e&&e.__esModule?e:{default:e}}(c),u=function(){var e={UPDATE_CSRF_TOKEN:"axe-comments/UPDATE_CSRF_TOKEN",FLAG_AS_FETCHING_COMMENTS:"axe-comments/FLAG_AS_FETCHING_COMMENTS",UPDATE_COMMENTS:"axe-comments/UPDATE_COMMENTS",TOGGLE_COMMENT_LIKE:"axe-comments/TOGGLE_COMMENT_LIKE",TOGGLE_COMMENT_DISLIKE:"axe-comments/TOGGLE_COMMENT_DISLIKE",DELETE_COMMENT:"axe-comments/DELETE_COMMENT",SAVE_NEW_COMMENT:"axe-comments/SAVE_NEW_COMMENT"},t={csrfToken:null,comments:null,fetching:!1,abortFetch:!1},n=function(e){return function(){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(c.type){case e.UPDATE_CSRF_TOKEN:return o({},n,{csrfToken:c.csrfToken});case e.FLAG_AS_FETCHING_COMMENTS:return o({},n,{fetching:!0,abortFetch:!1});case e.UPDATE_COMMENTS:var m={};return m=n.abortFetch?{fetching:!1,abortFetch:!1}:{fetching:!1,comments:c.comments},o({},n,m);case e.TOGGLE_COMMENT_LIKE:return o({},n,{abortFetch:!0,comments:n.comments.map(function(e){if(e.id===c.commentId){var t=e.rating,n={};return 1===parseInt(e["current_user-vote"])?(t--,n=o({},e,{rating:t,"current_user-vote":0})):(t++,-1===parseInt(e["current_user-vote"])&&t++,n=o({},e,{rating:t,"current_user-vote":1})),n}return e})});case e.TOGGLE_COMMENT_DISLIKE:return o({},n,{abortFetch:!0,comments:n.comments.map(function(e){if(e.id===c.commentId){var t=e.rating,n={};return-1===parseInt(e["current_user-vote"])?(t++,n=o({},e,{rating:t,"current_user-vote":0})):(t--,1===parseInt(e["current_user-vote"])&&t--,n=o({},e,{rating:t,"current_user-vote":-1})),n}return e})});case e.DELETE_COMMENT:return o({},n,{abortFetch:!0,comments:n.comments.filter(function(e){return e.id.toString()!==c.commentId.toString()})});case e.SAVE_NEW_COMMENT:return o({},n,{comments:[{id:c.commentData.id,guest_author_name:c.commentData.commentorName,text:c.commentData.text,stillLoading:!0,date:""}].concat(r(n.comments))});default:return n}}}},c=function(e){return function(t){var n=function(){return function(n){n({type:e.FLAG_AS_FETCHING_COMMENTS});var r="function"==typeof t.fetchComments?t.fetchComments():t.fetchComments;return fetch(r||"/get-comments",{credentials:"include",headers:new Headers({"X-Requested-With":"XMLHttpRequest"})}).then(function(e){return e.json()}).then(function(t){n({type:e.UPDATE_COMMENTS,comments:t})})}};return{fetchComments:n,toggleCommentLike:function(n,r){return function(o,c){var m=c().axeComments.csrfToken;if(1===n["current_user-vote"]){var u="function"==typeof t.toggleCommentLike?t.toggleCommentLike("unlike"):t.toggleCommentLike,i=new FormData;i.append("csrf",m),i.append("commentId",n.id),fetch(u||"/unlike-comment",{credentials:"include",headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),method:"POST",body:i}).then(function(e){return e.blob()}).then(function(e){!e.size&&r&&r()})}else{var a="function"==typeof t.toggleCommentLike?t.toggleCommentLike("like"):t.toggleCommentLike,s=new FormData;s.append("csrf",m),s.append("commentId",n.id),fetch(a||"/like-comment",{credentials:"include",headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),method:"POST",body:s}).then(function(e){return e.blob()}).then(function(e){!e.size&&r&&r()})}o({type:e.TOGGLE_COMMENT_LIKE,commentId:n.id})}},toggleCommentDislike:function(n,r){return function(o,c){var m=c().axeComments.csrfToken;if(-1===n["current_user-vote"]){var u="function"==typeof t.toggleCommentDislike?t.toggleCommentDislike("undislike"):t.toggleCommentDislike,i=new FormData;i.append("csrf",m),i.append("commentId",n.id),fetch(u||"/undislike-comment",{credentials:"include",headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),method:"POST",body:i}).then(function(e){return e.blob()}).then(function(e){!e.size&&r&&r()})}else{var a="function"==typeof t.toggleCommentDislike?t.toggleCommentDislike("dislike"):t.toggleCommentDislike,s=new FormData;s.append("csrf",m),s.append("commentId",n.id),fetch(a||"/dislike-comment",{credentials:"include",headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),method:"POST",body:s}).then(function(e){return e.blob()}).then(function(e){!e.size&&r&&r()})}o({type:e.TOGGLE_COMMENT_DISLIKE,commentId:n.id})}},deleteComment:function(n){return function(r,o){var c=o().axeComments.csrfToken,m="function"==typeof t.deleteComment?t.deleteComment():t.deleteComment,u=new FormData;u.append("csrf",c),u.append("commentId",n.id),fetch(m||"/delete-comment",{credentials:"include",headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),method:"POST",body:u}),r({type:e.DELETE_COMMENT,commentId:n.id})}},createNewComment:function(r,o,c){return function(m,u){var i=u().axeComments.csrfToken,a="function"==typeof t.createNewComment?t.createNewComment():t.createNewComment,s=new FormData;s.append("csrf",i),s.append("commentorName",r),s.append("text",o),fetch(a||"/create-new-comment",{credentials:"include",headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),method:"POST",body:s}).then(function(e){return e.json()}).then(function(){m(n()),c()}),m({type:e.SAVE_NEW_COMMENT,commentData:{id:0-Math.floor(1e9*Math.random()+1),commentorName:r,text:o}})}}}}};return(0,m.default)(e,n,c)}();e.exports=u},function(e,t,n){"use strict";var r=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return function(r){var o=r||"redux-duck-"+(Math.floor(9e13*Math.random())+1e13),c=Object.keys(e).reduce(function(t,n){return t[n]=e[n]+"/"+o,t},{});return{ACTIONS:c,createReducer:t(c),actionCreators:n(c)}}};t.default=r}]);